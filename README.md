# widjet-json-form [![Build Status](https://travis-ci.org/abe33/widjet-json-form.svg?branch=master)](https://travis-ci.org/abe33/widjet-json-form) [![codecov](https://codecov.io/gh/abe33/widjet-json-form/branch/master/graph/badge.svg)](https://codecov.io/gh/abe33/widjet-json-form)

A widget to generate forms using a json object descriptor

## Install

```sh
npm install --save widjet-json-form
```

## Usage

```js
import widgets from 'widjet'
import 'widjet-json-form'

widgets('json-form', '[data-schema]', {on: 'load'})
```

### Form Schema

```json
{
  "property": "type",

  "otherProperty": {
    "type": "type",
    "fieldSetting": "whatever"
  }
}
```

### Templates

By default the widget will look for templates in the `window.JST` object, all templates being named such as `templates/form/<template-name>`.

The default template names being used by the widget are the following:

- `form`: The wrapper of the whole form, will receive its content through the `content` parameter. It also receives an `id` that corresponds to the `data-id` defined on the target element.
- `field`: The wrapper for a form's field, will receive its content through the `content` parameter as well as the parameters passed to the input (`id`, `name`, `type`, `value`, `attribute`, `attributePath` and `parameters`, see below for a details of what each parameter contains).
- `object`: If the field's type is `object` this template will be used as a wrapper for the whole sub-form instead of the `field` one. It receives the exact same parameters that `field`.
- `array`: If the field's type is `array` this template will be used as a wrapper for all the items in the array. It receives the same parameters as the `field` and `object` templates.
- `arrayItem`: If the field's type is `array`, the sub-form for each item will be wrapped using this template. The template will receive its `content` and `index` as parameters.

#### Templates parameters

Templates that render field wrappers and inputs receive a bunch of parameters depending on the context.

- `id`: The id of the element, the id for a field is generated automatically using the id of its parent form and the attribute path.
- `type`: The type of the field as defined in the schema.
- `attribute`: The name of the current attribute.
- `attributePath`: An array with every component that form the path to the attribute starting from the schema root.
- `name`: The input name as generated by the `fieldName` function using the attribute path.
- `value`: The value of the field as provided in the `data-values` attribute.
- `parameters`: An object with the parameters of the field as defined in the schema.
- `content`: Wrapper templates will receive the HTML content to wrap in that parameter.
